package:
    name: e2fsprogs
    version: 1.47.3
    rel: 1
    archive: false

sources:
    - url: https://downloads.sourceforge.net/project/e2fsprogs/e2fsprogs/v1.47.3/e2fsprogs-1.47.3.tar.gz
      md5: 113d7a7ee0710d2a670a44692a35fd2e

build: |
    mkdir -v zbuild && cd zbuild && ../configure --prefix=/usr --sysconfdir=/etc \
    --enable-elf-shlibs --disable-libblkid --disable-libuuid --disable-uuidd --disable-fsck &&
    make

install: |
    cd zbuild && make install

final: |
    cd zbuild && rm -fv /usr/lib/{libcom_err,libe2p,libext2fs,libss}.a &&
    gunzip -v /usr/share/info/libext2fs.info.gz &&
    install-info --dir-file=/usr/share/info/dir /usr/share/info/libext2fs.info &&
    makeinfo -o doc/com_err.info ../lib/et/com_err.texinfo &&
    install -v -m644 doc/com_err.info /usr/share/info &&
    install-info --dir-file=/usr/share/info/dir /usr/share/info/com_err.info
